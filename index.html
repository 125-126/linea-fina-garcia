<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>L√≠nea Fina GARC√çA</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    background: linear-gradient(to bottom, #FFF8F0, #FFECD1);
    color: #333;
  }

  /* Banner de promoci√≥n fijo con parpadeo */
  #promo-banner {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    background: #FF8C42;
    color: white;
    text-align: center;
    padding: 10px;
    font-size: 1.1rem;
    font-weight: bold;
    z-index: 2000;
    animation: parpadeo 1.5s infinite alternate;
  }
  @keyframes parpadeo {
    from { opacity: 1; }
    to { opacity: 0.6; }
  }

  header {
    background: linear-gradient(to right, #FF8C42, #FF6F3C);
    color: white;
    padding: 15px;
    text-align: center;
    position: relative;
    font-size: 2.2rem;
    font-weight: 900;
    text-transform: uppercase;
    letter-spacing: 2px;
    margin-top: 45px;
  }

  #cart-icon {
    position: absolute;
    right: 20px;
    top: 15px;
    font-size: 24px;
    cursor: pointer;
  }

  #cart-count {
    background: red;
    color: white;
    border-radius: 50%;
    padding: 2px 6px;
    font-size: 14px;
    position: absolute;
    top: 10px;
    right: 10px;
  }

  nav {
    margin: 15px 0 8px;
    text-align: center;
  }

  nav button {
    background: #FF6F3C;
    color: white;
    border: none;
    margin: 0 8px 8px;
    padding: 10px 18px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
    font-size: 1rem;
    transition: background 0.3s ease;
  }

  nav button:hover {
    background: #e65b2a;
  }

  /* Buscador */
  .buscador { text-align:center; margin: 0 0 10px; }
  #search-input {
    width: 80%;
    max-width: 420px;
    padding: 10px 12px;
    border-radius: 8px;
    border: 1px solid #ccc;
    box-shadow: 0 1px 3px rgba(0,0,0,0.05) inset;
  }

  /* GRILLA DE PRODUCTOS */
  .productos-container {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: 20px;
    padding: 20px;
    max-width: 1200px;
    margin: auto;
  }

  .producto {
    background: white;
    padding: 15px;
    border-radius: 10px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    text-align: center;
    position: relative;
  }

  .producto img {
    max-width: 100%;
    border-radius: 8px;
    cursor: pointer;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    object-fit: contain;
    max-height: 150px;
    background-color: #f9f9f9;
  }
  .producto img:hover {
    transform: scale(1.05);
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
  }

  .etiqueta {
    position:absolute;
    top:10px;
    left:10px;
    background:red;
    color:white;
    font-size:0.8rem;
    padding:3px 6px;
    border-radius:4px;
    font-weight:bold;
  }
  .etiqueta.nuevo { background:green; }

  .estrellas {
    margin-top: 8px;
    color: #FFD700;
    font-size: 1.3rem;
  }

  .cantidad-selector {
    display:flex;
    justify-content:center;
    align-items:center;
    margin:8px 0 4px;
    gap: 6px;
  }
  .cantidad-selector button {
    padding:4px 10px;
    border:none;
    background:#FF6F3C;
    color:white;
    font-size:1rem;
    cursor:pointer;
    border-radius:6px;
  }
  .cantidad-selector input {
    width:48px;
    text-align:center;
    border:1px solid #ccc;
    border-radius:6px;
    padding:6px 4px;
  }

  button.agregar-carrito {
    background: #28a745;
    color: white;
    padding: 10px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    margin-top: 6px;
    font-weight: bold;
    font-size: 1rem;
    transition: background 0.3s ease;
  }
  button.agregar-carrito:hover {
    background: #218838;
  }

  /* PANEL DEL CARRITO */
  #cart-panel {
    position: fixed;
    top: 0;
    right: -450px;
    width: 450px;
    height: 100%;
    background: #fff;
    box-shadow: -2px 0 8px rgba(0,0,0,0.3);
    transition: right 0.3s ease;
    display: flex;
    flex-direction: column;
    z-index: 1000;
    border-radius: 8px 0 0 8px;
    overflow: hidden;
  }
  #cart-panel.open { right: 0; }

  #cart-title {
    text-align: center;
    font-size: 1.3rem;
    font-weight: bold;
    padding: 15px;
    margin: 0;
    background: linear-gradient(to right, #FF8C42, #FF6F3C);
    color: white;
    border-bottom: 2px solid #f0f0f0;
  }

  #cart-items {
    flex-grow: 1;
    overflow-y: auto;
    padding: 15px;
  }

  .cart-item {
    background: #FFF5EE;
    padding: 10px;
    border-radius: 8px;
    margin-bottom: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    font-size: 14px;
  }

  .cart-item span { flex: 1; font-weight: 500; color: #333; }

  .cart-item button {
    background: #FF4C4C;
    padding: 5px 8px;
    font-size: 12px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    color: white;
    transition: background 0.3s;
  }
  .cart-item button:hover { background: #d93b3b; }

  #cart-total {
    padding: 15px;
    font-weight: bold;
    font-size: 1.2rem;
    text-align: right;
    background: #FFF0E6;
    border-top: 2px solid #FF6F3C;
  }

  #close-cart {
    background: none;
    border: none;
    font-size: 1.8rem;
    position: absolute;
    top: 10px;
    right: 15px;
    cursor: pointer;
    color: white;
    z-index: 10;
  }

  .flying-img {
    position: absolute;
    width: 50px;
    transition: all 1s ease;
    z-index: 2000;
  }

  footer {
    background: #FF6F3C;
    color: white;
    text-align: center;
    padding: 20px 10px;
    font-size: 1rem;
    margin-top: 40px;
  }

  footer a {
    margin: 0 10px;
    color: white;
    font-size: 1.5rem;
    text-decoration: none;
    vertical-align: middle;
    transition: color 0.3s ease;
  }
  footer a:hover { color: #e65b2a; }

  .whatsapp-float {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #25D366;
    color: white;
    font-size: 30px;
    padding: 12px 15px;
    border-radius: 50%;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
    z-index: 3000;
  }

  /* RESPONSIVE PARA M√ìVILES */
  @media screen and (max-width: 1200px) {
    .productos-container { grid-template-columns: repeat(3, 1fr); }
  }
  @media screen and (max-width: 768px) {
    .productos-container { grid-template-columns: repeat(2, 1fr); }
  }
  @media screen and (max-width: 480px) {
    .productos-container { grid-template-columns: 1fr; }
  }
</style>
</head>
<body>

<div id="promo-banner">üéâ ¬°Env√≠os gratis por compras mayores a $50! üéâ</div>

<header>
  L√çNEA FINA GARC√çA
  <div id="cart-icon">üõí<span id="cart-count">0</span></div>
</header>

<nav>
  <button onclick="filtrarProductos('todos')">Inicio</button>
  <button onclick="filtrarProductos('ropa')">Ropa</button>
  <button onclick="filtrarProductos('accesorios')">Accesorios</button>
  <button onclick="mostrarContacto()">Contacto</button>
  <button onclick="mostrarOtros()">Otros</button>
</nav>

<style>
  .productos-container {
    display: grid;
    grid-template-columns: repeat(6, 1fr); /* 6 productos por fila */
    gap: 20px;
    padding: 20px;
  }

  .producto {
    position: relative;
    border: 1px solid #ddd;
    padding: 10px;
    text-align: center;
    border-radius: 8px;
    background-color: #fff;
  }

  .producto img {
    width: 100%;
    height: auto;          /* altura autom√°tica para ver completa la imagen */
    max-height: 150px;     /* limita la altura sin recortar */
    object-fit: contain;    /* mantiene proporci√≥n completa */
    border-radius: 5px;
    background-color: #f9f9f9;
  }

  .agregar-carrito {
    background-color: #28a745;
    color: white;
    border: none;
    padding: 6px 10px;
    border-radius: 5px;
    cursor: pointer;
    margin-top: 10px;
  }

  .cantidad-selector {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 5px;
    margin: 10px 0;
  }

  .cantidad-selector input {
    width: 40px;
    text-align: center;
  }

  .etiqueta {
    position: absolute;
    background-color: #ff6f61;
    color: white;
    padding: 2px 6px;
    font-size: 0.8rem;
    border-radius: 3px;
    top: 10px;
    left: 10px;
  }

  .estrellas {
    margin-top: 5px;
    color: #f1c40f;
    font-size: 1rem;
  }

  @media screen and (max-width: 1200px) {
    .productos-container {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  @media screen and (max-width: 768px) {
    .productos-container {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media screen and (max-width: 480px) {
    .productos-container {
      grid-template-columns: 1fr;
    }
  }
</style>

<div class="productos-container">
  <!-- Camisas -->
  <article class="producto ropa">
    <span class="etiqueta">Oferta</span>
    <img src="imagenes/camisa1.jpeg" alt="Camisa1">
    <h3>Camisa 1</h3>
    <p>$7.00</p>
    <div class="cantidad-selector">
      <button onclick="this.nextElementSibling.value=Math.max(1,parseInt(this.nextElementSibling.value)-1)">-</button>
      <input type="number" value="1" min="1">
      <button onclick="this.previousElementSibling.value=parseInt(this.previousElementSibling.value)+1">+</button>
    </div>
    <button class="agregar-carrito" onclick="addToCart('Camisa 1', 7, this)">Agregar al carrito</button>
    <div class="estrellas">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
    <p style="font-size:0.9rem; color:#555; margin:6px 0 0;">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (23 opiniones)</p>
  </article>

  <article class="producto ropa">
    <span class="etiqueta nuevo">Nuevo</span>
    <img src="imagenes/camisa2.jpeg" alt="Camisa2">
    <h3>Camisa 2</h3>
    <p>$7.00</p>
    <div class="cantidad-selector">
      <button onclick="this.nextElementSibling.value=Math.max(1,parseInt(this.nextElementSibling.value)-1)">-</button>
      <input type="number" value="1" min="1">
      <button onclick="this.previousElementSibling.value=parseInt(this.previousElementSibling.value)+1">+</button>
    </div>
    <button class="agregar-carrito" onclick="addToCart('Camisa 2', 7, this)">Agregar al carrito</button>
    <div class="estrellas">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
    <p style="font-size:0.9rem; color:#555; margin:6px 0 0;">‚≠ê‚≠ê‚≠ê‚≠ê (12 opiniones)</p>
  </article>

  <article class="producto ropa">
    <img src="imagenes/camisa3.jpeg" alt="Camisa3">
    <h3>Camisa 3</h3>
    <p>$7.00</p>
    <div class="cantidad-selector">
      <button onclick="this.nextElementSibling.value=Math.max(1,parseInt(this.nextElementSibling.value)-1)">-</button>
      <input type="number" value="1" min="1">
      <button onclick="this.previousElementSibling.value=parseInt(this.previousElementSibling.value)+1">+</button>
    </div>
    <button class="agregar-carrito" onclick="addToCart('Camisa 3', 7, this)">Agregar al carrito</button>
    <div class="estrellas">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
    <p style="font-size:0.9rem; color:#555; margin:6px 0 0;">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (9 opiniones)</p>
  </article>

  <article class="producto ropa">
    <img src="imagenes/camisa4.jpeg" alt="Camisa4">
    <h3>Camisa 4</h3>
    <p>$7.00</p>
    <div class="cantidad-selector">
      <button onclick="this.nextElementSibling.value=Math.max(1,parseInt(this.nextElementSibling.value)-1)">-</button>
      <input type="number" value="1" min="1">
      <button onclick="this.previousElementSibling.value=parseInt(this.previousElementSibling.value)+1">+</button>
    </div>
    <button class="agregar-carrito" onclick="addToCart('Camisa 4', 7, this)">Agregar al carrito</button>
    <div class="estrellas">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
    <p style="font-size:0.9rem; color:#555; margin:6px 0 0;">‚≠ê‚≠ê‚≠ê‚≠ê (6 opiniones)</p>
  </article>

  <article class="producto ropa">
    <img src="imagenes/camisa5.jpeg" alt="Camisa5">
    <h3>Camisa 5</h3>
    <p>$7.00</p>
    <div class="cantidad-selector">
      <button onclick="this.nextElementSibling.value=Math.max(1,parseInt(this.nextElementSibling.value)-1)">-</button>
      <input type="number" value="1" min="1">
      <button onclick="this.previousElementSibling.value=parseInt(this.previousElementSibling.value)+1">+</button>
    </div>
    <button class="agregar-carrito" onclick="addToCart('Camisa 5', 7, this)">Agregar al carrito</button>
    <div class="estrellas">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
    <p style="font-size:0.9rem; color:#555; margin:6px 0 0;">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (18 opiniones)</p>
  </article>

  <article class="producto ropa">
    <img src="imagenes/camisa6.jpeg" alt="Camisa6">
    <h3>Camisa 6</h3>
    <p>$7.00</p>
    <div class="cantidad-selector">
      <button onclick="this.nextElementSibling.value=Math.max(1,parseInt(this.nextElementSibling.value)-1)">-</button>
      <input type="number" value="1" min="1">
      <button onclick="this.previousElementSibling.value=parseInt(this.previousElementSibling.value)+1">+</button>
    </div>
    <button class="agregar-carrito" onclick="addToCart('Camisa 6', 7, this)">Agregar al carrito</button>
    <div class="estrellas">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
    <p style="font-size:0.9rem; color:#555; margin:6px 0 0;">‚≠ê‚≠ê‚≠ê‚≠ê (5 opiniones)</p>
  </article>

  <!-- Shorts -->
  <article class="producto ropa">
    <span class="etiqueta">Oferta</span>
    <img src="imagenes/Short1.jpeg" alt="Short1">
    <h3>Short 1</h3>
    <p>$6.00</p>
    <div class="cantidad-selector">
      <button onclick="this.nextElementSibling.value=Math.max(1,parseInt(this.nextElementSibling.value)-1)">-</button>
      <input type="number" value="1" min="1">
      <button onclick="this.previousElementSibling.value=parseInt(this.previousElementSibling.value)+1">+</button>
    </div>
    <button class="agregar-carrito" onclick="addToCart('Short 1', 6, this)">Agregar al carrito</button>
    <div class="estrellas">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
    <p style="font-size:0.9rem; color:#555; margin:6px 0 0;">‚≠ê‚≠ê‚≠ê‚≠ê (8 opiniones)</p>
  </article>

  <article class="producto ropa">
    <img src="imagenes/Short2.jpeg" alt="Short2">
    <h3>Short 2</h3>
    <p>$6.00</p>
    <div class="cantidad-selector">
      <button onclick="this.nextElementSibling.value=Math.max(1,parseInt(this.nextElementSibling.value)-1)">-</button>
      <input type="number" value="1" min="1">
      <button onclick="this.previousElementSibling.value=parseInt(this.previousElementSibling.value)+1">+</button>
    </div>
    <button class="agregar-carrito" onclick="addToCart('Short 2', 6, this)">Agregar al carrito</button>
    <div class="estrellas">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
    <p style="font-size:0.9rem; color:#555; margin:6px 0 0;">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (11 opiniones)</p>
  </article>

  <article class="producto ropa">
    <img src="imagenes/Short3.jpeg" alt="Short3">
    <h3>Short 3</h3>
    <p>$6.00</p>
    <div class="cantidad-selector">
      <button onclick="this.nextElementSibling.value=Math.max(1,parseInt(this.nextElementSibling.value)-1)">-</button>
      <input type="number" value="1" min="1">
      <button onclick="this.previousElementSibling.value=parseInt(this.previousElementSibling.value)+1">+</button>
    </div>
    <button class="agregar-carrito" onclick="addToCart('Short 3', 6, this)">Agregar al carrito</button>
    <div class="estrellas">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
    <p style="font-size:0.9rem; color:#555; margin:6px 0 0;">‚≠ê‚≠ê‚≠ê‚≠ê (7 opiniones)</p>
  </article>

  <article class="producto ropa">
    <img src="imagenes/Short4.jpeg" alt="Short4">
    <h3>Short 4</h3>
    <p>$6.00</p>
    <div class="cantidad-selector">
      <button onclick="this.nextElementSibling.value=Math.max(1,parseInt(this.nextElementSibling.value)-1)">-</button>
      <input type="number" value="1" min="1">
      <button onclick="this.previousElementSibling.value=parseInt(this.previousElementSibling.value)+1">+</button>
    </div>
    <button class="agregar-carrito" onclick="addToCart('Short 4', 6, this)">Agregar al carrito</button>
    <div class="estrellas">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
    <p style="font-size:0.9rem; color:#555; margin:6px 0 0;">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (10 opiniones)</p>
  </article>

  <article class="producto ropa">
    <img src="imagenes/Short5.jpeg" alt="Short5">
    <h3>Short 5</h3>
    <p>$6.00</p>
    <div class="cantidad-selector">
      <button onclick="this.nextElementSibling.value=Math.max(1,parseInt(this.nextElementSibling.value)-1)">-</button>
      <input type="number" value="1" min="1">
      <button onclick="this.previousElementSibling.value=parseInt(this.previousElementSibling.value)+1">+</button>
    </div>
    <button class="agregar-carrito" onclick="addToCart('Short 5', 6, this)">Agregar al carrito</button>
    <div class="estrellas">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
    <p style="font-size:0.9rem; color:#555; margin:6px 0 0;">‚≠ê‚≠ê‚≠ê‚≠ê (4 opiniones)</p>
  </article>
</div>

</section>
<!-- Panel lateral del carrito -->
<div id="cart-panel">
  <button id="close-cart" title="Cerrar carrito">&times;</button>
  <h2 id="cart-title">üõçÔ∏è Productos Seleccionados</h2>
  <div id="cart-items"></div>
  <div id="cart-total">Total: $0.00</div>
</div>

<!-- Secci√≥n de Contacto -->
<section id="contacto" style="display:none; max-width: 600px; margin: 40px auto; padding: 20px; background: white; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
  <h2>Contacto</h2>
  <form id="contact-form">
    <label for="nombre">Nombre:</label><br>
    <input type="text" id="nombre" name="nombre" required style="width: 100%; padding:8px; margin-bottom:10px; border-radius:4px; border:1px solid #ccc;"><br>
    <label for="email">Correo electr√≥nico:</label><br>
    <input type="email" id="email" name="email" required style="width: 100%; padding:8px; margin-bottom:10px; border-radius:4px; border:1px solid #ccc;"><br>
    <label for="mensaje">Mensaje:</label><br>
    <textarea id="mensaje" name="mensaje" rows="4" required style="width: 100%; padding:8px; margin-bottom:10px; border-radius:4px; border:1px solid #ccc;"></textarea><br>
    <button type="submit" style="background:#FF6F3C; color:white; padding:10px 20px; border:none; border-radius:6px; cursor:pointer;">Enviar</button>
  </form>
</section>

<!-- Secci√≥n Otros -->
<section id="otros" style="display:none; max-width: 600px; margin: 40px auto; padding: 20px; background: white; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); text-align:center;">
  <h2>Otros</h2>
  <p>Contenido adicional o futuras secciones aqu√≠.</p>
</section>

<!-- Lightbox -->
<div id="lightbox" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); justify-content:center; align-items:center; z-index:2000;">
  <span id="lightbox-close" style="position:absolute; top:20px; right:30px; color:white; font-size:40px; cursor:pointer;">&times;</span>
  <span id="lightbox-prev" style="position:absolute; top:50%; left:30px; color:white; font-size:50px; cursor:pointer; transform:translateY(-50%);">&#10094;</span>
  <span id="lightbox-next" style="position:absolute; top:50%; right:30px; color:white; font-size:50px; cursor:pointer; transform:translateY(-50%);">&#10095;</span>
  <img id="lightbox-img" src="" style="max-width:90%; max-height:90%; border-radius:10px;">
</div>

<footer>
  <p>Contacto: carlosale.miranda555@gmail.com | Tel: +503 7152-3657</p>
  <div>
    <a href="https://wa.me/50360014234" target="_blank" rel="noopener" aria-label="WhatsApp">
      <i class="fab fa-whatsapp"></i>
    </a>
  </div>
</footer>

<!-- Bot√≥n flotante de WhatsApp -->
<a class="whatsapp-float" href="https://wa.me/50371523657" target="_blank" rel="noopener" aria-label="WhatsApp chat">
  <i class="fab fa-whatsapp"></i>
</a>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
  // =========================
  // CARRITO DE COMPRAS
  // =========================
  const cartPanel = document.getElementById('cart-panel');
  const cartIcon = document.getElementById('cart-icon');
  const closeCartBtn = document.getElementById('close-cart');
  const cartItemsContainer = document.getElementById('cart-items');
  const cartTotalEl = document.getElementById('cart-total');
  const cartCountEl = document.getElementById('cart-count');

  let cart = [];

  function updateCartDisplay() {
    cartItemsContainer.innerHTML = '';
    let total = 0;
    cart.forEach((item, index) => {
      const itemEl = document.createElement('div');
      itemEl.classList.add('cart-item');
      itemEl.innerHTML = `
        <span>${item.name} x ${item.quantity} - $${item.price * item.quantity}</span>
        <button onclick="removeCartItem(${index})">ELIMINAR</button>
      `;
      cartItemsContainer.appendChild(itemEl);
      total += item.price * item.quantity;
    });
    cartTotalEl.textContent = 'Total: $' + total.toFixed(2);
    cartCountEl.textContent = cart.length;
  }

  function addToCart(name, price, button) {
    const quantityInput = button.parentElement.querySelector('input');
    const quantity = parseInt(quantityInput.value);

    // Imagen voladora
    const img = button.parentElement.querySelector('img');
    const flyingImg = img.cloneNode();
    flyingImg.classList.add('flying-img');
    document.body.appendChild(flyingImg);
    const rect = img.getBoundingClientRect();
    flyingImg.style.top = rect.top + 'px';
    flyingImg.style.left = rect.left + 'px';

    const cartRect = cartIcon.getBoundingClientRect();
    setTimeout(() => {
      flyingImg.style.top = cartRect.top + 'px';
      flyingImg.style.left = cartRect.left + 'px';
      flyingImg.style.width = '30px';
    }, 10);

    setTimeout(() => flyingImg.remove(), 800);

    // Agregar al carrito
    const existingItem = cart.find(item => item.name === name);
    if (existingItem) {
      existingItem.quantity += quantity;
    } else {
      cart.push({ name, price, quantity });
    }
    updateCartDisplay();
  }

  function removeCartItem(index) {
    cart.splice(index, 1);
    updateCartDisplay();
  }

  // Abrir y cerrar carrito
  cartIcon.addEventListener('click', () => cartPanel.classList.add('open'));
  closeCartBtn.addEventListener('click', () => cartPanel.classList.remove('open'));

  // Cerrar carrito solo al hacer clic fuera
  document.addEventListener('click', (e) => {
    if (!cartPanel.contains(e.target) && e.target !== cartIcon) {
      cartPanel.classList.remove('open');
    }
  });

  // =========================
  // FINALIZAR PEDIDO POR WHATSAPP
  // =========================
  function placeOrder() {
    if(cart.length === 0){
      alert('El carrito est√° vac√≠o.');
      return;
    }

    let mensaje = 'Nuevo pedido:%0A';
    let total = 0;

    cart.forEach(item => {
      mensaje += `${item.name} x ${item.quantity} - $${item.price*item.quantity}%0A`;
      total += item.price*item.quantity;
    });

    mensaje += `Total: $${total.toFixed(2)}`;

    const numeroWhatsapp = '50371523657'; // tu n√∫mero de WhatsApp sin + ni espacios
    const url = `https://wa.me/${numeroWhatsapp}?text=${mensaje}`;

    window.open(url, '_blank');

    cart = [];
    updateCartDisplay();
    cartPanel.classList.remove('open');
  }

  // Bot√≥n Finalizar Pedido
  const orderBtn = document.createElement('button');
  orderBtn.textContent = 'Finalizar Pedido';
  orderBtn.style.background = '#007bff';
  orderBtn.style.color = 'white';
  orderBtn.style.padding = '10px';
  orderBtn.style.border = 'none';
  orderBtn.style.borderRadius = '6px';
  orderBtn.style.margin = '10px';
  orderBtn.style.cursor = 'pointer';
  orderBtn.addEventListener('click', placeOrder);
  cartPanel.appendChild(orderBtn);

  // =========================
  // BUSCADOR DE PRODUCTOS
  // =========================
  const searchInput = document.getElementById('search-input');
  if(searchInput){
    searchInput.addEventListener('input', () => {
      const filter = searchInput.value.toLowerCase();
      const products = document.querySelectorAll('.producto');
      products.forEach(prod => {
        const name = prod.querySelector('h3').textContent.toLowerCase();
        prod.style.display = name.includes(filter) ? '' : 'none';
      });
    });
  }

  // =========================
  // FILTRADO POR CATEGOR√çAS
  // =========================
  function filtrarProductos(categoria) {
    document.getElementById('contacto').style.display = 'none';
    document.getElementById('otros').style.display = 'none';

    const productos = document.querySelectorAll('.producto');
    productos.forEach(prod => {
      if(categoria === 'todos') {
        prod.style.display = '';
      } else if(prod.classList.contains(categoria)) {
        prod.style.display = '';
      } else {
        prod.style.display = 'none';
      }
    });
  }

  function mostrarContacto() {
    document.getElementById('contacto').style.display = 'block';
    document.getElementById('otros').style.display = 'none';
    filtrarProductos('todos');
  }

  function mostrarOtros() {
    document.getElementById('otros').style.display = 'block';
    document.getElementById('contacto').style.display = 'none';
    filtrarProductos('todos');
  }

  // =========================
  // LIGHTBOX PARA IM√ÅGENES
  // =========================
  const lightbox = document.getElementById('lightbox');
  const lightboxImg = document.getElementById('lightbox-img');
  const lightboxClose = document.getElementById('lightbox-close');

  document.querySelectorAll('.producto img').forEach(img => {
    img.addEventListener('click', () => {
      lightbox.style.display = 'flex';
      lightboxImg.src = img.src;
    });
  });

  lightboxClose.addEventListener('click', () => {
    lightbox.style.display = 'none';
  });

  lightbox.addEventListener('click', (e) => {
    if(e.target === lightbox) lightbox.style.display = 'none';
  });
</script>
</body>
</html>
